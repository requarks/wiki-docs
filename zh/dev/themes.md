---
title: 主题
description: 自定义您wiki的外观
published: true
date: 2023-03-16T08:45:000Z
tags: 
editor: markdown
dateCreated: 2023-01-08T10:35:14.633Z
---

# 概述

Wiki.js附带了一个默认主题，它支持亮色模式和暗色模式，对于大多数用户来说应该足够了。

# 下载新主题

**现在还无法更改或下载新主题**。此功能计划在未来发布。

# 创建自己的主题

> :warning: **目前尚未完全支持自定义主题** 但可以手动创建一个主题并将其编译为捆绑包的一部分。
>
> *以下说明适用于熟悉Node.js/Vue.js开发的开发人员。*
{.is-danger}

## 可以定制的内容

内容页的所有地方都可以修改，但**标题（顶部的黑色导航栏）除外**。因为标题是动态的，并且在wiki的所有部分（管理员、编辑器、配置文件等）中都一致使用，所以不能修改它。

## 开始定制

在进一步操作之前，您首先需要[配置开发环境](/dev)。

## 主题结构

在`client/themes`目录中，创建`default`文件夹的副本，并将其重命名为任何您喜欢的名称（例如：`mytheme`）。文件夹名称必须小写，不能有空格或特殊字符。

主题文件夹由以下元素组成：

- **components**: 页面、侧边栏、页脚等元素的Vue组件（视图）。入口点是`page.vue`，是必需的。
- **js**: 特定于主题的Javascript代码。入口点是`app.js`，并且是必需的*（可以是空文件）*。
- **scss**: 特定于主题的SCSS代码。入口点是`app.scss`，并且是必需的*（可以是空文件）*。
- **theme.yml**: 主题清单文件（关于主题的信息）。
- **thumbnail.png**: 主题的缩略预览图。

## 开发

使用`yarn dev`命令以开发模式启动Wiki.js。对主题所做的任何更改都将自动重新构建客户端资源。

### 激活您的自定义主题

为了让Wiki.js使用您的主题，您必须首先将其设置为激活主题。目前这还不能通过管理区完成。您需要直接修改数据库：

- 在 `settings` 表中, 找到 `theming` 列并编辑JSON字段值。
- 将主题属性更改为先前创建的文件夹的名称并提交更改。
- 重新启动wiki以应用更改。（您可以在终端中键入`rs` + <kbd>ENTER</kbd>以自动重新加载服务端）
- 您的主题现已激活。

### 编辑组件

`components/page.vue` 是主视图。您可以在此处引入其他组件。

> `props`对象和`created()`方法**必须保持原样**！这些方法将页面数据持久化到存储中，并被应用（在其它地方）调用。更改它们可能会破坏整个页面！
{.is-warning}

## 编译 + 部署

主题准备就绪后，您需要编译项目以进行部署。

> 请注意，您还需要使用与上述相同的说明修改生产数据库以使用自定义主题。
{.is-info}

### 使用 Docker

运行下面的docker build命令（将tag更改为您自己的docker库名称）：

```bash
docker build -f dev/build/Dockerfile -t my-org/wiki:some-tag .
```

### 手动编译

运行下面的构建指令：
```bash
yarn build
```

这将生成一个名为`assets`的新文件夹，以及`/server/views`文件夹下的视图。将两个文件夹复制并粘贴到生产服务器，然后重新启动wiki。

---
title: 从Wiki.js v1.x迁移
description: 如何从旧的v1.x安装中导入内容和用户。
published: true
date: 2023-03-16T08:45:000Z
tags: 
editor: markdown
dateCreated: 2023-01-08T10:36:12.770Z
---

# 概述

为了从旧的1.x版本的Wiki.js升级，您需要首先使用标准[安装指南](/install)安装Wiki.js2.x。

由于v1和v2之间存在显著的体系结构差异，**您无法进行原地升级**。
您需要首先进行新的v2安装，从中导入内容、上传资源和用户。

新的v2安装工作后，请按照以下说明将旧v1实例中的内容、上传资源和用户导入新的v2实例。

# 导入

1. 转到**管理区** *（单击页面右上方的头像）*。
1. 单击左侧导航栏中的**实用程序**。
1. 单击**从Wiki.js 1.x**导入。
1. 选择是要导入**内容+上传资源**、**用户**还是同时导入两者。

## 内容+上传资源

如果您使用远程Git存储库在v1安装中同步内容，请选择**从Git导入**。
否则，选择**从本地目录导入**。

### 从Git导入

输入连接到远程Git存储库所需的所有连接信息。这些设置应与在**git**部分下的v1`config.yml`文件中输入的设置相同。

如果使用**SSH**身份验证方法，则需要将在v1中引用的文件的内容复制到**私钥内容**字段中。

> :warning: **警告**
>
> 大多数情况下，应保留默认值`/data/repo`作为**本地存储库路径**字段的值。此目录应为专用于v2的空目录。
> **不要**指向当前的v1本地存储库文件夹。
{.is-danger}

### 从本地目录导入

输入v1安装中使用的本地存储库目录的路径。

## 用户

输入在v1实例的`config.yml`文件中输入的MongoDB数据库连接字符串。

选择应如何创建组和权限。*建议使用第一个选项，将具有相同权限的用户放入同一组*

## 开始导入

准备就绪后，单击**开始导入**按钮启动迁移过程。如果导入失败，您将收到对应的导入失败的内容的通知，系统将显示无法导入的用户列表。

> 根据需要多次重试迁移过程不会造成损害。不会发生重复，因为系统将跳过已存在的用户并更新内容。
{.is-info}

# 迁移后的工作

一旦迁移完成，并且验证了内容、上传资源和用户已复制成功，请确保阅读以下建议：

- 如果您使用**从Git导入**选项导入内容，建议您关闭v1实例。虽然可以并行运行连接到同一个Git存储库的v1和v2实例，但您应该确保只对其中一个进行编辑。在同一时间范围内编辑两个安装上的同一页面可能会导致合并冲突。
- 如果您使用**从本地目录导入**选项导入内容，强烈建议您更改路径，使其不再指向v1实例。为此，请单击左侧导航栏中的**存储**，然后单击**本地文件系统**。将路径更改为其他路径（例如：`./data/content`）。此外，除非您希望内容在更改时导出到磁盘，否则可以完全禁用**本地文件系统**存储模块。

